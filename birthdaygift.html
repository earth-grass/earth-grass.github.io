<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>æŸäººçš„ç”Ÿæ—¥ç¤¼ç‰©ç”µå­ç‰ˆ</title>
    <style>
        /* å…¨å±€æ ·å¼ï¼šç»Ÿä¸€é¡µé¢åŸºç¡€é£æ ¼ */
        body {
            font-family: "Microsoft YaHei", sans-serif;
            text-align: center;
            padding: 20px;
            background-color: #f5f5f5;
            margin: 0; /* æ¸…é™¤é»˜è®¤è¾¹è· */
        }
        h1 {
            color: #e63946;
            margin-bottom: 10px;
        }
        h2 {
            color: #457b9d;
            margin-top: 0;
        }
        p {
            color: #1d3557;
            font-size: 18px;
        }
        /* å›¾ç‰‡å®¹å™¨æ ·å¼ï¼šç»Ÿä¸€æ’åˆ— */
        .image-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 20px 0;
        }
        /* å›¾ç‰‡åŸºç¡€æ ·å¼ï¼šåˆå§‹æ­£å¸¸æ˜¾ç¤ºï¼ŒåŠ¨ç”»è¿‡æ¸¡ */
        .person-image {
            max-width: 200px;
            height: auto;
            margin: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: all 0.5s ease; /* åŠ¨ç”»è¿‡æ¸¡ */
            opacity: 1; /* åˆå§‹å®Œå…¨ä¸é€æ˜ï¼ˆå»æ‰ç°æ„Ÿï¼‰ */
            transform: scale(1); /* åˆå§‹æ­£å¸¸å¤§å° */
        }
        /* æ¿€æ´»æ€ï¼šçªå‡ºæ˜¾ç¤ºç›®æ ‡å›¾ç‰‡ */
        .person-image.active {
            opacity: 1;
            transform: scale(1.1); /* æ”¾å¤§ */
            box-shadow: 0 0 20px rgba(66, 133, 244, 0.8); /* é«˜äº®é˜´å½± */
            z-index: 10;
        }
        /* è„‰å†²åŠ¨ç”»ï¼šè®©æ¿€æ´»å›¾æŒç»­å¾®åŠ¨ */
        @keyframes pulse {
            0% { transform: scale(1.1); }
            50% { transform: scale(1.15); }
            100% { transform: scale(1.1); }
        }
        .person-image.active.pulse {
            animation: pulse 1.5s infinite;
        }
        /* è§¦å‘æŒ‰é’®æ ·å¼ */
        #openModal {
            padding: 12px 24px;
            font-size: 16px;
            cursor: pointer;
            background: #4285f4;
            color: white;
            border: none;
            border-radius: 4px;
            transition: background 0.3s;
            margin-top: 20px;
        }
        #openModal:hover {
            background: #3367d6;
        }
        /* åˆå§‹æ¨¡æ€çª—å£æ ·å¼ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        /* å¼¹çª—å†…å®¹åŒº */
        .modal-content {
            background: white;
            width: 90%;
            max-width: 500px;
            border-radius: 8px;
            padding: 25px;
            position: relative;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        /* å…³é—­æŒ‰é’®ï¼ˆå³ä¸Šè§’ï¼‰ */
        .modal-close {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 24px;
            color: #666;
            border: none;
            background: transparent;
            cursor: pointer;
            padding: 0;
            transition: color 0.3s;
        }
        .modal-close:hover {
            color: #e63946;
        }
        /* å¼¹çª—æ ‡é¢˜ */
        .delayed-content {
            font-size: 18px;
            color: #1d3557;
            margin-bottom: 20px;
            font-weight: 600;
        }
        /* è¾“å…¥æ¡†æ ·å¼ */
        .modal-body input {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 16px;
        }
        .modal-body p {
            margin: 0;
            color: #333;
        }
        /* åº•éƒ¨æŒ‰é’®åŒº */
        .modal-footer {
            margin-top: 25px;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        /* å–æ¶ˆ/ç¡®è®¤æŒ‰é’®æ ·å¼åŒºåˆ† */
        .modal-btn.cancel {
            padding: 10px 20px;
            background: #eee;
            color: #666;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .modal-btn.cancel:hover {
            background: #ddd;
        }
        .modal-btn.confirm {
            padding: 10px 20px;
            background: #4285f4;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .modal-btn.confirm:hover {
            background: #3367d6;
        }
        /* ç­”æ¡ˆæ­£ç¡®/é”™è¯¯æç¤ºæ ·å¼ */
        .tip {
            margin-top: 15px;
            font-size: 14px;
            font-weight: 500;
        }
        .tip.success {
            color: #2a9d8f;
        }
        .tip.error {
            color: #e63946;
        }

        /* è½¬ç›˜æŠ½å¥–çª—å£æ ·å¼ */
        #wheelModal {
            display: none;
            z-index: 1001; /* ç¡®ä¿åœ¨å…¶ä»–å¼¹çª—ä¹‹ä¸Š */
        }
        /* å‰©ä½™æ¬¡æ•°æ˜¾ç¤ºæ ·å¼ */
        .remaining-times {
            color: #e63946;
            font-weight: bold;
            margin: 10px 0;
            font-size: 16px;
        }
        /* è½¬ç›˜å®¹å™¨æ ·å¼ */
        .wheel-container {
            position: relative;
            width: 300px;
            height: 300px;
            margin: 20px auto;
        }
        /* è½¬ç›˜æ ·å¼ */
        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            border: 8px solid #fff;
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
            transition: transform 5s cubic-bezier(0.17, 0.67, 0.12, 0.99);
            transform: rotate(0deg);
        }
        /* è½¬ç›˜åˆ†åŒºæ ·å¼ï¼ˆæŒ‰ç¤¼ç‰©é¡ºåºåŒ¹é…ï¼‰ */
        .wheel-section {
            position: absolute;
            width: 50%;
            height: 50%;
            transform-origin: bottom right; /* æ‰‡å½¢çš„æ—‹è½¬ä¸­å¿ƒç‚¹ï¼ˆå›ºå®šï¼‰ */
            display: flex; /* ç”¨flexå±…ä¸­æ–‡å­—ï¼Œæ¯”absoluteæ›´ç¨³å®š */
            align-items: center; 
            justify-content: center;
            overflow: hidden;
            padding: 20px; /* ç•™å†…è¾¹è·ï¼Œé¿å…æ–‡å­—è´´æ‰‡å½¢è¾¹ç¼˜ */
        }
        .wheel-section:nth-child(1) {
            background-color: #ff6b6b; /* ç¬¬ä¸€æ¬¡ç¤¼ç‰©ï¼šé¦™å» */
            transform: rotate(0deg) skewY(45deg);
        }
        .wheel-section:nth-child(2) {
            background-color: #4ecdc4; /* ç¬¬äºŒæ¬¡ç¤¼ç‰©ï¼šé™ªç© */
            transform: rotate(90deg) skewY(45deg);
        }
        .wheel-section:nth-child(3) {
            background-color: #ffd166; /* ç¬¬ä¸‰æ¬¡ç¤¼ç‰©ï¼šæŠ¤æ‰‹éœœ */
            transform: rotate(180deg) skewY(45deg);
        }
        .wheel-section:nth-child(4) {
            background-color: #06d6a0; /* å¤‡ç”¨åŒºåŸŸ */
            transform: rotate(270deg) skewY(45deg);
        }
        /* è½¬ç›˜æ–‡å­—æ ·å¼ */
        .wheel-text {
            color: #fff;
            font-weight: bold;
            font-size: 14px;
            width: 100%; /* å æ»¡æ‰‡å½¢åŒºçš„å¯ç”¨å®½åº¦ */
            text-align: center;
        }
        
        /* æ–‡å­—æ–¹å‘è¡¥å¿æ ·å¼ */
        .text-compensate-0 {
            transform: skewY(-45deg);
        }
        .text-compensate-90 {
            transform: skewY(-45deg) rotate(-90deg);
        }
        .text-compensate-180 {
            transform: skewY(-45deg) rotate(-180deg);
        }
        .text-compensate-270 {
            transform: skewY(-45deg) rotate(-270deg);
        }
        
        /* æŒ‡é’ˆæ ·å¼ - ä¼˜åŒ–è§†è§‰æ•ˆæœ */
        .wheel-pointer {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 30px solid #e63946;
            z-index: 10;
            pointer-events: none;
            /* æ·»åŠ é˜´å½±å¢å¼ºç«‹ä½“æ„Ÿ */
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.2));
        }
        /* æŒ‡é’ˆåº•éƒ¨å°åœ†åœˆ */
        .wheel-pointer::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: -10px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: #e63946;
        }
        
        /* è½¬ç›˜æŒ‰é’®æ ·å¼ */
        #spinButton {
            margin-top: 10px;
            padding: 10px 20px;
            background-color: #4285f4;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        #spinButton:hover:not(:disabled) {
            background-color: #3367d6;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        #spinButton:disabled {
            background-color: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        /* ä¸­å¥–ä¿¡æ¯æ ·å¼ */
        .prize-message {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            background-color: #f0f8ff;
            display: none;
            animation: fadeIn 0.5s ease;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .prize-message h3 {
            color: #2a9d8f;
            margin-top: 0;
        }
        /* æˆªå›¾æç¤ºæ ·å¼ */
        .screenshot-tip {
            color: #e63946;
            font-weight: bold;
            margin-top: 15px;
            font-size: 16px;
        }
        /* æ‰€æœ‰ç¤¼ç‰©æ±‡æ€»æ ·å¼ */
        .all-prizes {
            margin-top: 15px;
            padding: 10px;
            border-top: 1px dashed #ddd;
            display: none;
        }
        .all-prizes h4 {
            color: #1d3557;
            margin: 10px 0;
        }
        .all-prizes ul {
            list-style: none;
            padding: 0;
            text-align: left;
            margin: 0 auto;
            max-width: 300px;
        }
        .all-prizes li {
            margin: 5px 0;
            color: #333;
        }
        
        /* è½¬ç›˜æ—‹è½¬éŸ³æ•ˆæç¤º */
        .spin-sound-indicator {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            display: none;
        }
    </style>
</head>
<body>
    <h1>é‡è¦æé†’ï¼š<br>èƒ½çœ‹åˆ°è¿™ä¸ªå†…å®¹çš„éƒ½ä¸æ˜¯ä¸€èˆ¬äºº</h1>
    <h2>Because this is my first HTML.</h2>
    <p>It's for someone's birthday.</p>
    
    <!-- å›¾ç‰‡å®¹å™¨ï¼šæ¯ä¸ªå›¾ç‰‡çš„data-nameä¸æ˜ å°„è¡¨å¯¹åº” -->
    <div class="image-container">
        <img src="herocolor/æ§ç‹å°¼å…‹è€è¡¨.jpg" alt="æ§ç‹å°¼å…‹çš„ç…§ç‰‡" class="person-image" data-name="æ§ç‹å°¼å…‹è€è¡¨">
        <img src="herocolor/æ§çš®å¡ä¸˜è€è¡¨.jpg" alt="æ§çš®å¡ä¸˜çš„ç…§ç‰‡" class="person-image" data-name="æ§çš®å¡ä¸˜è€è¡¨">
        <img src="herocolor/ä½å¤´ç©æ‰‹æœºçš„å‚…å§“å¥³äºº.jpg" alt="ä½å¤´ç©æ‰‹æœºçš„å‚…å§“æœ‹å‹" class="person-image" data-name="ä½å¤´ç©æ‰‹æœºçš„å‚…å§“å¥³äºº">
        <img src="herocolor/æ–¯è¯ºå…‹ä¹‹æ—‹ç¥.jpg" alt="æ–¯è¯ºå…‹æ—‹ç¥çš„ç…§ç‰‡" class="person-image" data-name="æ–¯è¯ºå…‹ä¹‹æ—‹ç¥">
        <img src="herocolor/æ–¯è¯ºå…‹æ­ªå¤´å¥³ç¥.jpg" alt="æ–¯è¯ºå…‹æ­ªå¤´å¥³ç¥" class="person-image" data-name="æ–¯è¯ºå…‹æ­ªå¤´å¥³ç¥">
        <img src="herocolor/æ£çƒçš„å¸…æ°”å‚…å§“é»„æ¯›.jpg" alt="æ£çƒçš„å‚…å§“æœ‹å‹" class="person-image" data-name="æ£çƒçš„å¸…æ°”å‚…å§“é»„æ¯›">
        <img src="herocolor/æ‘†çƒæ–¯è¯ºå…‹æ—‹ç¥.jpg" alt="æ‘†çƒçš„æ–¯è¯ºå…‹æ—‹ç¥" class="person-image" data-name="æ‘†çƒæ–¯è¯ºå…‹æ—‹ç¥">
        <img src="herocolor/ä¸‰ä¸ªå¸…å¥³äºº.jpg" alt="ä¸‰ä¸ªå¸…å¥³ç”Ÿçš„åˆç…§" class="person-image" data-name="ä¸‰ä¸ªå¸…å¥³äºº">
    </div>

    <!-- è§¦å‘æŒ‰é’® -->
    <button id="openModal">For who?å¥½éš¾çŒœå•Š ç‚¹æˆ‘å‘Šè¯‰ä½ </button>

    <!-- åˆå§‹æ¨¡æ€çª—å£ -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <button class="modal-close">&times;</button>
            <div class="delayed-content">å“ˆå“ˆå“ˆéª—ä½ çš„ï¼Œåªæœ‰ç­”å¯¹é—®é¢˜æ‰ä¼šå‘Šè¯‰ä½ </div>
            <div class="modal-body">
                <p>å§“ç”šåè°ï¼Ÿ</p>
                <input type="text" id="nameInput" placeholder="è¯•è¯•è¾“å…¥å†…å®¹..." />
                <div class="tip" id="tip"></div>
            </div>
            <div class="modal-footer">
                <button class="modal-btn cancel" id="cancelBtn">å–æ¶ˆ</button>
                <button class="modal-btn confirm" id="confirmBtn">ç¡®è®¤</button>
            </div>
        </div>
    </div>

    <!-- è½¬ç›˜æŠ½å¥–çª—å£ï¼ˆæ–°å¢å‰©ä½™æ¬¡æ•°æ˜¾ç¤º+ç¤¼ç‰©æ±‡æ€»ï¼‰ -->
    <div id="wheelModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" id="wheelCloseBtn">&times;</button>
            <h3>å¹¸è¿å¤§è½¬ç›˜</h3>
            <p>å…±3æ¬¡æŠ½å–æœºä¼šï¼Œæ¯æ¬¡éƒ½æœ‰æƒŠå–œï¼</p>
            <!-- å‰©ä½™æ¬¡æ•°æ˜¾ç¤º -->
            <div class="remaining-times" id="remainingTimes">å‰©ä½™æŠ½å–æ¬¡æ•°ï¼š3</div>
            
            <div class="wheel-container">
                <!-- è½¬ç›˜ï¼ˆæŒ‰ç¤¼ç‰©é¡ºåºæ ‡æ³¨ï¼‰ -->
                <div class="wheel" id="wheel">
                    <div class="wheel-section">
                        <div class="wheel-text text-compensate-0">ä½œè€…é¦™å»ä¸€æš</div> <!-- ç¬¬1æ¬¡ç¤¼ç‰© -->
                    </div>
                    <div class="wheel-section">
                        <div class="wheel-text text-compensate-90">å…è´¹é™ªç©ä¸€å¤©</div> <!-- ç¬¬2æ¬¡ç¤¼ç‰© -->
                    </div>
                    <div class="wheel-section">
                        <div class="wheel-text text-compensate-180">JennieåŒæ¬¾æŠ¤æ‰‹éœœ</div> <!-- ç¬¬3æ¬¡ç¤¼ç‰© -->
                    </div>
                    <div class="wheel-section">
                        <div class="wheel-text text-compensate-270">æƒŠå–œå¤‡ç”¨</div>
                    </div>
                </div>
                <!-- æŒ‡é’ˆ -->
                <div class="wheel-pointer"></div>
            </div>
            
            <!-- æŠ½å¥–æŒ‰é’®ï¼ˆåŠ¨æ€æ˜¾ç¤ºâ€œå¼€å§‹æŠ½å¥–â€/â€œå†æŠ½ä¸€æ¬¡â€/â€œæŠ½å–ç»“æŸâ€ï¼‰ -->
            <button id="spinButton">å¼€å§‹æŠ½å¥–</button>
            <div class="spin-sound-indicator" id="spinSoundIndicator">è½¬ç›˜æ—‹è½¬ä¸­...</div>
            
            <!-- ä¸­å¥–ä¿¡æ¯ + æ‰€æœ‰ç¤¼ç‰©æ±‡æ€» -->
            <div class="prize-message" id="prizeMessage">
                <h3 id="prizeTitle">æ­å–œæ­å–œ</h3>
                <p id="prizeDescription"></p>
                <!-- æ‰€æœ‰ç¤¼ç‰©æ±‡æ€»ï¼ˆç¬¬ä¸‰æ¬¡æŠ½å–åæ˜¾ç¤ºï¼‰ -->
                <div class="all-prizes" id="allPrizes">
                    <h4>ğŸ‰ æ‰€æœ‰ç¤¼ç‰©éƒ½åœ¨è¿™äº†ï¼Œçƒè‰å·²æ•£å°½å®¶è´¢ï¼š</h4>
                    <ul>
                        <li>1. ä½œè€…é¦™å»ä¸€æš</li>
                        <li>2. ä½œè€…å…è´¹é™ªç©ä¸€å¤©</li>
                        <li>3. JennieåŒæ¬¾TAMBURINSæŠ¤æ‰‹éœœä¸€ç›’</li>
                        <li>çœ‹å‘†äº†å§ï¼Œå¿«æˆªå›¾æ‰¾çƒè‰å…‘ç¤¼ç‰©å•Š</li>
                    </ul>
                </div>
                <!-- æˆªå›¾æç¤ºï¼ˆç¬¬ä¸‰æ¬¡æŠ½å–åæ˜¾ç¤ºï¼‰ -->
                <p class="screenshot-tip" id="screenshotTip" style="display: none;">å¿«æˆªå›¾æ‰¾ä½œè€…è¦ç¤¼ç‰©å“¦ï¼</p>
            </div>
        </div>
    </div>

    <script>
        // 1. åŸºç¡€DOMå…ƒç´ è·å–
        const modal = document.getElementById('modal');
        const openBtn = document.getElementById('openModal');
        const closeBtn = document.querySelector('.modal-close');
        const cancelBtn = document.getElementById('cancelBtn');
        const confirmBtn = document.getElementById('confirmBtn');
        const nameInput = document.getElementById('nameInput');
        const tip = document.getElementById('tip');
        
        // è½¬ç›˜ç›¸å…³å…ƒç´ ï¼ˆæ–°å¢å‰©ä½™æ¬¡æ•°/ç¤¼ç‰©æ±‡æ€»/æˆªå›¾æç¤ºï¼‰
        const wheelModal = document.getElementById('wheelModal');
        const wheelCloseBtn = document.getElementById('wheelCloseBtn');
        const wheel = document.getElementById('wheel');
        const spinButton = document.getElementById('spinButton');
        const prizeMessage = document.getElementById('prizeMessage');
        const prizeTitle = document.getElementById('prizeTitle');
        const prizeDescription = document.getElementById('prizeDescription');
        const remainingTimes = document.getElementById('remainingTimes');
        const allPrizes = document.getElementById('allPrizes');
        const screenshotTip = document.getElementById('screenshotTip');
        const spinSoundIndicator = document.getElementById('spinSoundIndicator');

        // 2. æ ¸å¿ƒé…ç½®
        const correctName = "ä»˜æ–‡"; // å¯¿æ˜Ÿåå­—
        const nameToImageMap = {
            "èƒ¡æ¬£æ‚¦": ["æ§ç‹å°¼å…‹è€è¡¨", "æ§çš®å¡ä¸˜è€è¡¨"],
            "ä»˜æ–‡": ["ä½å¤´ç©æ‰‹æœºçš„å‚…å§“å¥³äºº", "æ£çƒçš„å¸…æ°”å‚…å§“é»„æ¯›"],
            "ç‹è‰ºæ—‹": ["æ–¯è¯ºå…‹ä¹‹æ—‹ç¥", "æ–¯è¯ºå…‹æ­ªå¤´å¥³ç¥", "æ‘†çƒæ–¯è¯ºå…‹æ—‹ç¥"],
        };
        // å›ºå®š3æ¬¡ç¤¼ç‰©é…ç½®ï¼ˆé¡ºåºï¼šç¬¬1æ¬¡â†’ç¬¬2æ¬¡â†’ç¬¬3æ¬¡ï¼‰
        // ä¿®å¤è§’åº¦é—®é¢˜ï¼šæ¯ä¸ªåŒºåŸŸ90åº¦ï¼Œä¸­å¿ƒè§’åº¦åˆ†åˆ«ä¸º45, 135, 225, 315åº¦
        const fixedPrizes = [
            { 
                name: "ä½œè€…é¦™å»ä¸€æš", 
                description: "æ­¤ç¤¼ç‰©è‹¥ä¸æƒ³è¦çƒè‰ä¸ä¼šå¼ºé€çš„",
                targetAngle: 45 // æŒ‡é’ˆæŒ‡å‘â€œé¦™å»â€åŒºåŸŸä¸­å¿ƒ
            },
            { 
                name: "ä½œè€…å…è´¹é™ªç©ä¸€å¤©",
                description: "çƒè‰å…¨å¤©æ— å¿é™ªç©ï¼Œç©å•¥éƒ½å¥‰é™ªï¼Œé™¤äº†æ¶ˆå¤§è´¹",
                targetAngle: 135 // æŒ‡é’ˆæŒ‡å‘â€œé™ªç©â€åŒºåŸŸä¸­å¿ƒ
            },
            { 
                name: "JennieåŒæ¬¾TAMBURINSæŠ¤æ‰‹éœœä¸€ç›’", 
                description: "å¤§ç¤¼æ€»æ˜¯å‹è½´å‡ºåœºï¼ŒæƒŠå–œä¸ï¼Œè¦çˆ±ä¸Šæˆ‘äº†å§å“ˆå“ˆå“ˆ",
                targetAngle: 225 // æŒ‡é’ˆæŒ‡å‘â€œæŠ¤æ‰‹éœœâ€åŒºåŸŸä¸­å¿ƒ
            }
        ];
        let remainingCount = 3; // å‰©ä½™æŠ½å–æ¬¡æ•°ï¼ˆåˆå§‹3æ¬¡ï¼‰
        let drawIndex = 0; // å½“å‰æŠ½å–æ¬¡æ•°ç´¢å¼•ï¼ˆ0=ç¬¬1æ¬¡ï¼Œ1=ç¬¬2æ¬¡ï¼Œ2=ç¬¬3æ¬¡ï¼‰
        let isSpinning = false; // è½¬ç›˜æ˜¯å¦æ­£åœ¨æ—‹è½¬
        let currentRotation = 0; // è®°å½•å½“å‰è½¬ç›˜æ—‹è½¬è§’åº¦ï¼Œç”¨äºç´¯ç§¯æ—‹è½¬

        // 3. æ‰“å¼€åˆå§‹æ¨¡æ€æ¡†
        openBtn.addEventListener('click', () => {
            modal.style.display = 'flex';
            tip.textContent = '';
            nameInput.value = '';
            nameInput.disabled = false;
            confirmBtn.disabled = false;
            confirmBtn.style.opacity = 1;
        });

        // 4. å…³é—­åˆå§‹æ¨¡æ€æ¡†ï¼ˆ3ç§’åå¼¹å‡ºè½¬ç›˜ï¼‰
        function closeModal() {
            modal.style.display = 'none';
            tip.textContent = '';
            setTimeout(() => {
                wheelModal.style.display = 'flex';
                // é‡ç½®è½¬ç›˜çŠ¶æ€ï¼ˆé¿å…äºŒæ¬¡æ‰“å¼€æ—¶æ®‹ç•™ä¸Šæ¬¡çŠ¶æ€ï¼‰
                resetWheelState();
            }, 3000);
        }
        closeBtn.addEventListener('click', closeModal);
        cancelBtn.addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => e.target === modal && closeModal());

        // 5. å…³é—­è½¬ç›˜çª—å£ï¼ˆé‡ç½®æ‰€æœ‰çŠ¶æ€ï¼Œä¸‹æ¬¡æ‰“å¼€å¯é‡æ–°æŠ½3æ¬¡ï¼‰
        function closeWheelModal() {
            wheelModal.style.display = 'none';
            prizeMessage.style.display = 'none';
            resetWheelState();
        }
        wheelCloseBtn.addEventListener('click', closeWheelModal);
        wheelModal.addEventListener('click', (e) => e.target === wheelModal && closeWheelModal());

        // 6. é‡ç½®è½¬ç›˜çŠ¶æ€ï¼ˆå‰©ä½™æ¬¡æ•°ã€æŒ‰é’®æ–‡æœ¬ã€è§’åº¦ç­‰ï¼‰
        function resetWheelState() {
            remainingCount = 3;
            drawIndex = 0;
            isSpinning = false;
            currentRotation = 0;
            remainingTimes.textContent = `å‰©ä½™æŠ½å–æ¬¡æ•°ï¼š${remainingCount}`;
            spinButton.textContent = "å¼€å§‹æŠ½å¥–";
            spinButton.disabled = false;
            wheel.style.transform = "rotate(0deg)";
            allPrizes.style.display = 'none';
            screenshotTip.style.display = 'none';
            spinSoundIndicator.style.display = 'none';
        }

        // 7. ç¡®è®¤æŒ‰é’®ï¼šæ•´åˆéªŒè¯ + å›¾ç‰‡åŠ¨ç”»
        confirmBtn.addEventListener('click', () => {
            const inputName = nameInput.value.trim();
            if (!inputName) {
                tip.textContent = "ä¸è¾“åå­—è¿˜æƒ³è¦ç¤¼ç‰©ï¼Ÿ";
                tip.className = "tip error";
                return;
            }
            if (inputName === correctName) {
                tip.textContent = `å“Ÿï¼Œæ²¡é”™ï¼Œè¿™ä»½ç¤¼ç‰©æ˜¯ç»™${correctName}çš„ï¼ç”Ÿæ—¥å¿«ä¹ï¼ğŸ‚`;
                tip.className = "tip success";
                nameInput.disabled = true;
                confirmBtn.disabled = true;
                confirmBtn.style.opacity = 0.6;

                // è§¦å‘ç›®æ ‡å›¾ç‰‡åŠ¨ç”»
                const targetImageNames = nameToImageMap[inputName];
                const allImages = document.querySelectorAll('.person-image');
                allImages.forEach(img => img.classList.remove('active', 'pulse'));
                setTimeout(() => {
                    allImages.forEach(img => {
                        if (targetImageNames.includes(img.dataset.name)) {
                            img.classList.add('active');
                            setTimeout(() => img.classList.add('pulse'), 300);
                            img.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                        }
                    });
                }, 300);
                setTimeout(closeModal, 3000);
                return;
            }
            tip.textContent = "æ˜¯ä½ åå­—å—ä½ å°±ä¹±è¾“ï¼Ÿ";
            tip.className = "tip error";
        });

        // 8. æŒ‰Enteré”®è§¦å‘ç¡®è®¤
        nameInput.addEventListener('keydown', (e) => e.key === 'Enter' && confirmBtn.click());

        // 9. è½¬ç›˜æŠ½å¥–æ ¸å¿ƒé€»è¾‘ï¼ˆå›ºå®š3æ¬¡ç¤¼ç‰©+æ¬¡æ•°æ§åˆ¶ï¼‰
        spinButton.addEventListener('click', () => {
            if (isSpinning || remainingCount <= 0) return;
            
            isSpinning = true;
            spinButton.disabled = true;
            spinButton.textContent = "è½¬ç›˜è½¬åŠ¨ä¸­...";
            prizeMessage.style.display = 'none';
            spinSoundIndicator.style.display = 'block';
            
            // æ’­æ”¾æ—‹è½¬éŸ³æ•ˆï¼ˆæ¨¡æ‹Ÿï¼‰
            playSpinSound();

            // å…³é”®ï¼šæŒ‰æŠ½å–é¡ºåºåŒ¹é…å›ºå®šç¤¼ç‰©ï¼ˆç¬¬1æ¬¡â†’é¦™å»ï¼Œç¬¬2æ¬¡â†’é™ªç©ï¼Œç¬¬3æ¬¡â†’æŠ¤æ‰‹éœœï¼‰
            const currentPrize = fixedPrizes[drawIndex];
            
            // è®¡ç®—æ—‹è½¬è§’åº¦ - æ”¹è¿›ç‰ˆï¼šå¢åŠ éšæœºæ€§åŒæ—¶ç¡®ä¿æŒ‡å‘æ­£ç¡®åŒºåŸŸ
            // æ¯æ¬¡æ—‹è½¬è‡³å°‘3åœˆï¼ˆ1080åº¦ï¼‰ï¼Œæœ€å¤š6åœˆï¼ˆ2160åº¦ï¼‰ï¼ŒåŠ ä¸Šç›®æ ‡è§’åº¦
            const randomSpins = 1080 + Math.floor(Math.random() * 1080); // 3-6åœˆéšæœº
            // è®¡ç®—æ€»æ—‹è½¬è§’åº¦ï¼Œè€ƒè™‘å½“å‰å·²æ—‹è½¬çš„è§’åº¦
            const totalSpinAngle = currentRotation + randomSpins + (360 - (currentRotation % 360)) + currentPrize.targetAngle;
            
            // åº”ç”¨æ—‹è½¬
            wheel.style.transform = `rotate(${totalSpinAngle}deg)`;
            
            // æ›´æ–°å½“å‰æ—‹è½¬è§’åº¦è®°å½•
            currentRotation = totalSpinAngle;

            // æ—‹è½¬ç»“æŸåæ˜¾ç¤ºç»“æœ+æ›´æ–°æ¬¡æ•°
            setTimeout(() => {
                spinSoundIndicator.style.display = 'none';
                
                // æ˜¾ç¤ºå½“å‰ä¸­å¥–ä¿¡æ¯
                prizeTitle.textContent = `å“Ÿï¼Œç¬¬${drawIndex + 1}æ¬¡ä¸­å¥–ï¼ŒæŠ½ä¸­ã€Œ${currentPrize.name}ã€`;
                prizeDescription.textContent = currentPrize.description;
                prizeMessage.style.display = 'block';

                // æ›´æ–°å‰©ä½™æ¬¡æ•°å’ŒæŒ‰é’®çŠ¶æ€
                remainingCount--;
                drawIndex++;
                remainingTimes.textContent = `å‰©ä½™æŠ½å–æ¬¡æ•°ï¼š${remainingCount}`;

                if (remainingCount > 0) {
                    // è¿˜æœ‰æ¬¡æ•°ï¼šæ˜¾ç¤ºâ€œå†æŠ½ä¸€æ¬¡â€
                    spinButton.textContent = "å†æŠ½ä¸€æ¬¡";
                    spinButton.disabled = false;
                } else {
                    // æ¬¡æ•°ç”¨å®Œï¼šæ˜¾ç¤ºâ€œæŠ½å–ç»“æŸâ€+æ‰€æœ‰ç¤¼ç‰©æ±‡æ€»+æˆªå›¾æç¤º
                    spinButton.textContent = "æŠ½å–ç»“æŸ";
                    spinButton.disabled = true;
                    allPrizes.style.display = 'block'; // å±•ç¤ºæ‰€æœ‰ç¤¼ç‰©
                    screenshotTip.style.display = 'block'; // æç¤ºæˆªå›¾
                }

                isSpinning = false;
            }, 5000); // ä¸CSSæ—‹è½¬è¿‡æ¸¡æ—¶é—´ä¸€è‡´ï¼ˆ5ç§’ï¼‰
        });
        
        // æ¨¡æ‹Ÿè½¬ç›˜æ—‹è½¬éŸ³æ•ˆ
        function playSpinSound() {
            // åˆ›å»ºéŸ³é¢‘ä¸Šä¸‹æ–‡
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // è®¾ç½®å£°éŸ³å‚æ•° - æ—‹è½¬æ—¶éŸ³è°ƒé€æ¸é™ä½
                oscillator.type = 'sine';
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime); // èµ·å§‹é¢‘ç‡
                oscillator.frequency.exponentialRampToValueAtTime(
                    50, audioContext.currentTime + 4.5 // 4.5ç§’åé™ä½åˆ°50Hz
                );
                
                // éŸ³é‡é€æ¸å‡å°
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(
                    0.01, audioContext.currentTime + 4.5
                );
                
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 5); // 5ç§’ååœæ­¢
            } catch (e) {
                console.log("æ— æ³•æ’­æ”¾éŸ³æ•ˆ:", e);
                // éŸ³æ•ˆæ’­æ”¾å¤±è´¥ä¸å½±å“ä¸»è¦åŠŸèƒ½
            }
        }
    </script>
</body>
</html>
